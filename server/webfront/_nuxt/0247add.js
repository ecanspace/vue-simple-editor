(window.webpackJsonp=window.webpackJsonp||[]).push([[20,21],{474:function(t,e,o){var content=o(506);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(53).default)("4a0cbf0e",content,!0,{sourceMap:!1})},475:function(t,e,o){"use strict";e.a={beforeCreate:function(){this.isClick=!1,this.dragging=!1,this.startX=0,this.startY=0,this.translateX=0,this.translateY=0},mounted:function(){this.$el.addEventListener("mousedown",this.mousedownHandler)},beforeDestroy:function(){this.$el.removeEventListener("mousedown",this.mousedownHandler)},methods:{mousedownHandler:function(t){t.preventDefault(),t.stopPropagation(),console.log("mousedown"),this.dragging=!0,this.isClick=!0,this.startX=t.pageX,this.startY=t.pageY,this.mousedownHook(t),window.addEventListener("mousemove",this.mousemoveHandler),window.addEventListener("mouseup",this.mouseupHandler)},mousemoveHandler:function(t){if(this.dragging){console.log("mousemove"),this.isClick=!1;var e=this.translateX+(t.pageX-this.startX),o=this.translateY+(t.pageY-this.startY);this.doTranslate(e,o)}},mouseupHandler:function(t){this.dragging&&(console.log("mouseup"),this.dragging=!1,this.translateX+=t.pageX-this.startX,this.translateY+=t.pageY-this.startY,this.mouseupHook(t),window.removeEventListener("mousemove",this.mousemoveHandler),window.removeEventListener("mouseup",this.mouseupHandler))},doTranslate:function(t,e){},mousedownHook:function(t){},mouseupHook:function(t){}}}},480:function(t,e,o){"use strict";o.d(e,"a",(function(){return n}));var n=function(t,e,o){return Math.min(Math.max(t,e),o)}},505:function(t,e,o){"use strict";o(474)},506:function(t,e,o){var n=o(52)(!1);n.push([t.i,".shape-point{display:inline-block;width:6px;height:6px;border-radius:100%;background-color:#fff;border:1px solid #409eff;position:absolute}.shape-point--lt{top:0;left:0;margin-top:-3px;margin-left:-3px;cursor:nw-resize}.shape-point--t{top:0;left:50%;transform:translateX(-50%);margin-top:-3px;cursor:n-resize}.shape-point--rt{top:0;right:0;margin-top:-3px;margin-right:-3px;cursor:ne-resize}.shape-point--r{top:50%;right:0;transform:translateY(-50%);margin-right:-3px;cursor:e-resize}.shape-point--rb{right:0;bottom:0;margin-right:-3px;margin-bottom:-3px;cursor:se-resize}.shape-point--b{bottom:0;left:50%;transform:translateX(-50%);margin-bottom:-3px;cursor:s-resize}.shape-point--lb{bottom:0;left:0;margin-left:-3px;margin-bottom:-3px;cursor:sw-resize}.shape-point--l{left:0;top:50%;transform:translateY(-50%);margin-left:-3px;cursor:w-resize}",""]),t.exports=n},509:function(t,e,o){var content=o(530);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(53).default)("632b394e",content,!0,{sourceMap:!1})},514:function(t,e,o){"use strict";o.r(e);o(88);var n=o(475),r=o(480),h="lt",c="t",l="rt",d="r",f="rb",m="b",v="lb",w="l",x={mixins:[n.a],inject:["shape"],props:{direction:String},computed:{visible:function(){return this.shape.active},shapeCoord:function(){return this.shape.currentCoord},currentPosition:function(){var t,e,o=this.shapeCoord;switch(this.direction){case h:t=o.left,e=o.top;break;case c:t=o.left+o.width/2,e=o.top;break;case l:t=o.left+o.width,e=o.top;break;case d:t=o.left+o.width,e=o.top+o.height/2;break;case f:t=o.left+o.width,e=o.top+o.height;break;case m:t=o.left+o.width/2,e=o.top+o.height;break;case v:t=o.left,e=o.top+o.height;break;case w:t=o.left,e=o.top+o.height/2}return{xaxis:t,yaxis:e}},toTop:function(){return["lt","t","rt"].includes(this.direction)},toRight:function(){return["rt","r","rb"].includes(this.direction)},toBottom:function(){return["lb","b","rb"].includes(this.direction)},toLeft:function(){return["lt","l","lb"].includes(this.direction)}},methods:{mousedownHook:function(){this.translateX=this.currentPosition.xaxis,this.translateY=this.currentPosition.yaxis},doTranslate:function(t,e){var o=this.shapeCoord,n={},h=this.shape.bounding;t=Object(r.a)(h.left,t,h.right-this.$el.offsetWidth),e=Object(r.a)(h.top,e,h.bottom-this.$el.offsetHeight),this.toTop&&(n.top=e,n.height=o.height+(o.top-e)),this.toRight&&(n.width=t-o.left),this.toBottom&&(n.height=e-o.top),this.toLeft&&(n.left=t,n.width=o.width+(o.left-t)),this.shape.updateCoord(n)}}},k=(o(505),o(37)),component=Object(k.a)(x,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("span",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],class:["shape-point","shape-point--"+t.direction]})}),[],!1,null,null,null);e.default=component.exports},529:function(t,e,o){"use strict";o(509)},530:function(t,e,o){var n=o(52)(!1);n.push([t.i,".shape{display:inline-block;cursor:move;position:absolute;border:1px dashed transparent;box-sizing:content-box}.shape.is-active{border-color:#409eff}.shape.input-mode{cursor:auto}.shape>:first-child{display:block;width:100%;height:100%}",""]),t.exports=n},533:function(t,e,o){"use strict";o.r(e);var n=o(13),r=(o(274),o(11),o(34),o(23),o(27),o(45),o(22),o(46),o(202)),h=o.n(r),c=o(475),l=o(480);function d(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}function f(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var m={name:"Shape",mixins:[c.a],directives:{clickoutside:h.a},props:{unqid:Number,coord:Object},provide:function(){return{shape:this}},data:function(){return{points:["lt","t","rt","r","rb","b","lb","l"],active:!1,movable:!0,currentCoord:this.coord}},beforeCreate:function(){this.threshold=2,this.bounding={}},mounted:function(){this.initBounding()},computed:{inputable:function(){return!1===this.movable},wrapperStyle:function(){var t=this.currentCoord;return Object.keys(t).reduce((function(e,o){return e[o]=t[o]+"px",e}),{})}},watch:{coord:function(t){this.currentCoord=t},active:function(t){t&&this.$store.dispatch("canvas/selectComponent",this.unqid)}},methods:{initBounding:function(){if(this.$el){var t=this.$el.parentNode||document.querySelector(".area-canvas");this.bounding.top=this.threshold,this.bounding.right=t.clientWidth-this.threshold,this.bounding.bottom=t.clientHeight-this.threshold,this.bounding.left=this.threshold}},mousedownHook:function(t){this.active=!0,this.translateX=this.currentCoord.left,this.translateY=this.currentCoord.top},doTranslate:function(t,e){t=Object(l.a)(this.bounding.left,t,this.bounding.right-this.$el.offsetWidth),e=Object(l.a)(this.bounding.top,e,this.bounding.bottom-this.$el.offsetHeight),this.updateCoord({left:t,top:e})},updateCoord:function(t){this.currentCoord=f(f({},this.currentCoord),t),this.$store.dispatch("canvas/update",{coord:this.currentCoord})},handleClick:function(){this.active=!1}}},v=(o(529),o(37)),component=Object(v.a)(m,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:t.handleClick,expression:"handleClick"}],staticClass:"shape",class:{"is-active":t.active,"input-mode":t.inputable},style:t.wrapperStyle},[t._t("default"),t._v(" "),t._l(t.points,(function(t){return o("shape-point",{key:t,attrs:{direction:t}})}))],2)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{ShapePoint:o(514).default})}}]);